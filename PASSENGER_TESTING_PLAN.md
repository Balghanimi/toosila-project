# ๐งช ุฎุทุฉ ุงุฎุชุจุงุฑ ุดุงููุฉ ูุฏูุงู ุงูุฑุงูุจ - ุชุทุจูู ุชูุตููุฉ

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงููุณุชูุฏ ูุญุชูู ุนูู ุฎุทุฉ ุงุฎุชุจุงุฑ ุดุงููุฉ ูุฌููุน ุฏูุงู ุงูุฑุงูุจ ูู ุชุทุจูู ุชูุตููุฉ. ุณูุชู ุงุฎุชุจุงุฑ ูู ุฏุงูุฉ ุนูู ุญุฏุฉ ูุน ุชูุซูู ุงููุชุงุฆุฌ.

---

## ๐ฏ ุฃูุฏุงู ุงูุงุฎุชุจุงุฑ

- โ ุงูุชุฃูุฏ ูู ุนูู ุฌููุน API endpoints ุจุดูู ุตุญูุญ
- โ ุงุฎุชุจุงุฑ ุฌููุน ุญุงูุงุช ุงููุฌุงุญ ูุงููุดู
- โ ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ุงูููุฑุฌุนุฉ
- โ ุงุฎุชุจุงุฑ ุงูุฃูุงู ูุงูุตูุงุญูุงุช
- โ ุงูุชุฃูุฏ ูู ุนูู ุงูุฅุดุนุงุฑุงุช ุงูููุฑูุฉ
- โ ุชูุซูู ุฃู ูุดุงูู ุฃู ุฃุฎุทุงุก

---

## ๐ ุญุงูุฉ ุงูุงุฎุชุจุงุฑ

| ุงููุฌููุนุฉ | ุงูุนุฏุฏ ุงูููู | ููุชูู | ูุงุดู | ูุนูู |
|----------|-------------|--------|------|------|
| ุงููุตุงุฏูุฉ | 8 | 0 | 0 | 8 |
| ุงูุทูุจุงุช | 9 | 0 | 0 | 9 |
| ุงูุนุฑูุถ | 5 | 0 | 0 | 5 |
| ุงูุญุฌูุฒุงุช | 8 | 0 | 0 | 8 |
| ุงููุฑุงุณูุฉ | 7 | 0 | 0 | 7 |
| ุงูุฅุดุนุงุฑุงุช | 8 | 0 | 0 | 8 |
| ุงูุชููููุงุช | 8 | 0 | 0 | 8 |
| **ุงููุฌููุน** | **53** | **0** | **0** | **53** |

---

## ๐ ุงููุฑุญูุฉ 1: ุงุฎุชุจุงุฑ ุฏูุงู ุงููุตุงุฏูุฉ (Authentication)

### 1.1 ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ (Register)

**Endpoint:** `POST /api/auth/register`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ:**
```json
{
  "name": "ุฑุงูุจ ุชุฌุฑูุจู",
  "email": "test_passenger_001@toosila.test",
  "password": "TestPass123!",
  "isDriver": false,
  "languagePreference": "ar"
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 201 Created
- Response ูุญุชูู ุนูู: `{ success: true, user: {...}, token: "..." }`
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููุฑุณู ูุชูุนูู ุงูุญุณุงุจ

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 1.2 ุชุณุฌูู ุงูุฏุฎูู (Login)

**Endpoint:** `POST /api/auth/login`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ:**
```json
{
  "email": "test_passenger_001@toosila.test",
  "password": "TestPass123!"
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- Response ูุญุชูู ุนูู token ู user data
- Token ุตุงูุญ ููุงุณุชุฎุฏุงู

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 1.3 ุนุฑุถ ุงูููู ุงูุดุฎุตู (Get Profile)

**Endpoint:** `GET /api/auth/profile`

**ุงูุญุงูุฉ:** โณ ูุนูู

**Headers:**
```
Authorization: Bearer [TOKEN]
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- Response ูุญุชูู ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู ุงููุงููุฉ

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 1.4 ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู (Update Profile)

**Endpoint:** `PUT /api/auth/profile`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ:**
```json
{
  "name": "ุฑุงูุจ ุชุฌุฑูุจู ูุญุฏุซ",
  "languagePreference": "en"
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุงูุจูุงูุงุช ุชู ุชุญุฏูุซูุง ุจูุฌุงุญ

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 1.5 ุชุบููุฑ ูููุฉ ุงููุฑูุฑ (Change Password)

**Endpoint:** `PUT /api/auth/change-password`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ:**
```json
{
  "currentPassword": "TestPass123!",
  "newPassword": "NewTestPass456!"
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ูููุฉ ุงููุฑูุฑ ุชู ุชุบููุฑูุง
- ูููู ุชุณุฌูู ุงูุฏุฎูู ุจูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 1.6 ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช (Get Stats)

**Endpoint:** `GET /api/auth/stats`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- Response ูุญุชูู ุนูู: totalOffers, totalDemands, totalBookings, averageRating

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 1.7 ุชุญุฏูุซ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (Update Email)

**Endpoint:** `PUT /api/auth/update-email`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ:**
```json
{
  "newEmail": "new_passenger@toosila.test",
  "password": "NewTestPass456!"
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุฑุณุงูุฉ ุชูุนูู ุชูุฑุณู ููุจุฑูุฏ ุงูุฌุฏูุฏ

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 1.8 ุญุฐู ุงูุญุณุงุจ (Delete Account)

**Endpoint:** `DELETE /api/auth/delete-account`

**ุงูุญุงูุฉ:** โณ ูุนูู (ุณูุชู ุงุฎุชุจุงุฑู ูู ุงูููุงูุฉ)

**ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ:**
```json
{
  "password": "NewTestPass456!"
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุงูุญุณุงุจ ููุญุฐู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

## ๐ ุงููุฑุญูุฉ 2: ุงุฎุชุจุงุฑ ุฏูุงู ุงูุทูุจุงุช (Demands)

### 2.1 ุฅูุดุงุก ุทูุจ ุฑุญูุฉ (Create Demand)

**Endpoint:** `POST /api/demands`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ:**
```json
{
  "fromCity": "ุจุบุฏุงุฏ",
  "toCity": "ุงูุจุตุฑุฉ",
  "earliestTime": "2025-11-20T06:00:00Z",
  "latestTime": "2025-11-20T10:00:00Z",
  "seats": 2,
  "budgetMax": 15000,
  "notes": "ุฃูุถู ุฑุญูุฉ ุตุจุงุญูุฉ ูุฑูุญุฉ"
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 201 Created
- ูุชู ุฅูุดุงุก ุงูุทูุจ ุจูุฌุงุญ
- Demand ID ููุฑุฌุน ูู Response

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 2.2 ุนุฑุถ ุฌููุน ุงูุทูุจุงุช (Get All Demands)

**Endpoint:** `GET /api/demands`

**ุงูุญุงูุฉ:** โณ ูุนูู

**Parameters:** `?page=1&limit=20`

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ูุงุฆูุฉ ุจุฌููุน ุงูุทูุจุงุช ุงููุดุทุฉ
- Pagination metadata

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 2.3 ุนุฑุถ ุทูุจุงุชู (Get My Demands)

**Endpoint:** `GET /api/demands/my/demands`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ูุงุฆูุฉ ุจุทูุจุงุช ุงููุณุชุฎุฏู ุงูุญุงูู ููุท

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 2.4 ุนุฑุถ ุทูุจ ูุญุฏุฏ (Get Demand by ID)

**Endpoint:** `GET /api/demands/:id`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุชูุงุตูู ุงูุทูุจ ูุงููุฉ ูุน ุนุฏุฏ ุงูุฑุฏูุฏ

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 2.5 ุงูุจุญุซ ูู ุงูุทูุจุงุช (Search Demands)

**Endpoint:** `GET /api/demands/search`

**ุงูุญุงูุฉ:** โณ ูุนูู

**Parameters:**
```
?fromCity=ุจุบุฏุงุฏ&toCity=ุงูุจุตุฑุฉ&minBudget=10000&maxBudget=20000
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ูุชุงุฆุฌ ุงูุจุญุซ ุงููุทุงุจูุฉ ูููุนุงููุฑ

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 2.6 ุชุนุฏูู ุงูุทูุจ (Update Demand)

**Endpoint:** `PUT /api/demands/:id`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ:**
```json
{
  "budgetMax": 18000,
  "notes": "ููุงุญุธุงุช ูุญุฏุซุฉ"
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุงูุทูุจ ูุชู ุชุญุฏูุซู ุจูุฌุงุญ

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 2.7 ุฅูุบุงุก ุชูุนูู ุงูุทูุจ (Deactivate Demand)

**Endpoint:** `PUT /api/demands/:id/deactivate`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- is_active ูุตุจุญ false

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 2.8 ุญุฐู ุงูุทูุจ (Delete Demand)

**Endpoint:** `DELETE /api/demands/:id`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุงูุทูุจ ููุญุฐู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 2.9 ุนุฑุถ ุฑุฏูุฏ ุงูุณุงุฆููู ุนูู ุงูุทูุจ (Get Demand Responses)

**Endpoint:** `GET /api/demand-responses/demand/:demandId`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ูุงุฆูุฉ ุจุฑุฏูุฏ ุงูุณุงุฆููู ุนูู ุงูุทูุจ

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

## ๐ ุงููุฑุญูุฉ 3: ุงุฎุชุจุงุฑ ุฏูุงู ุงูุนุฑูุถ ูุงูุญุฌุฒ (Offers & Bookings)

### 3.1 ุนุฑุถ ุฌููุน ุงูุนุฑูุถ (Get All Offers)

**Endpoint:** `GET /api/offers`

**ุงูุญุงูุฉ:** โณ ูุนูู

**Parameters:** `?page=1&limit=20`

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ูุงุฆูุฉ ุจุงูุนุฑูุถ ุงููุดุทุฉ

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 3.2 ุงูุจุญุซ ูู ุงูุนุฑูุถ (Search Offers)

**Endpoint:** `GET /api/offers/search`

**ุงูุญุงูุฉ:** โณ ูุนูู

**Parameters:**
```
?fromCity=ุจุบุฏุงุฏ&toCity=ุงูุจุตุฑุฉ&departureDate=2025-11-20&minSeats=2&sortBy=price_asc
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุนุฑูุถ ูุทุงุจูุฉ ููุจุญุซ ูุฑุชุจุฉ ุญุณุจ ุงูุณุนุฑ

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 3.3 ุนุฑุถ ุชูุงุตูู ุนุฑุถ ูุญุฏุฏ (Get Offer Details)

**Endpoint:** `GET /api/offers/:id`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุชูุงุตูู ุงูุนุฑุถ ูุงููุฉ ูุน ุจูุงูุงุช ุงูุณุงุฆู

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 3.4 ุญุฌุฒ ุฑุญูุฉ (Create Booking)

**Endpoint:** `POST /api/bookings`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ:**
```json
{
  "offerId": "[OFFER_UUID]",
  "seats": 2,
  "message": "ูุฑุญุจุงูุ ุณุฃููู ูู ุงูููุนุฏ ุงููุญุฏุฏ"
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 201 Created
- ุงูุญุฌุฒ ูููุดุฃ ุจุญุงูุฉ "pending"
- ุฅุดุนุงุฑ ููุฑุณู ููุณุงุฆู

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 3.5 ุนุฑุถ ุญุฌูุฒุงุชู (Get My Bookings)

**Endpoint:** `GET /api/bookings/my/bookings`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ูุงุฆูุฉ ุจุฌููุน ุญุฌูุฒุงุช ุงููุณุชุฎุฏู

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 3.6 ุนุฑุถ ุชูุงุตูู ุญุฌุฒ (Get Booking Details)

**Endpoint:** `GET /api/bookings/:id`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุชูุงุตูู ุงูุญุฌุฒ ูุงููุฉ

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 3.7 ุฅุญุตุงุฆูุงุช ุงูุญุฌูุฒุงุช (Get Booking Stats)

**Endpoint:** `GET /api/bookings/my/stats`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุฅุญุตุงุฆูุงุช ุงูุญุฌูุฒุงุช (total, pending, confirmed, etc.)

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 3.8 ุฅูุบุงุก ุงูุญุฌุฒ (Cancel Booking)

**Endpoint:** `PUT /api/bookings/:id/cancel`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุญุงูุฉ ุงูุญุฌุฒ ุชุตุจุญ "cancelled"
- ุฅุดุนุงุฑ ููุณุงุฆู

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

## ๐ฌ ุงููุฑุญูุฉ 4: ุงุฎุชุจุงุฑ ุฏูุงู ุงููุฑุงุณูุฉ (Messages)

### 4.1 ุฅุฑุณุงู ุฑุณุงูุฉ (Send Message)

**Endpoint:** `POST /api/messages`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ:**
```json
{
  "rideType": "offer",
  "rideId": "[OFFER_UUID]",
  "content": "ูุฑุญุจุงูุ ูุชู ุณุชุตู ุฅูู ููุทุฉ ุงูุงูุทูุงูุ"
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 201 Created
- ุงูุฑุณุงูุฉ ุชููุดุฃ ูุชูุฑุณู
- ุฅุดุนุงุฑ ูููุณุชูุจู

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 4.2 ุนุฑุถ ุงููุญุงุฏุซุงุช (Get Conversations)

**Endpoint:** `GET /api/messages/conversations`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ูุงุฆูุฉ ุจุฌููุน ุงููุญุงุฏุซุงุช

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 4.3 ุนุฑุถ ุฑุณุงุฆู ุฑุญูุฉ ูุญุฏุฏุฉ (Get Messages for Ride)

**Endpoint:** `GET /api/messages/offer/:offerId`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุฌููุน ุงูุฑุณุงุฆู ุงููุชุนููุฉ ุจุงูุฑุญูุฉ

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 4.4 ุนุฏุฏ ุงูุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ (Unread Count)

**Endpoint:** `GET /api/messages/unread-count`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- { unreadCount: number }

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 4.5 ุชุญุฏูุฏ ุฑุณุงูุฉ ูููุฑูุกุฉ (Mark as Read)

**Endpoint:** `PUT /api/messages/:id/read`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- is_read ูุตุจุญ true

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 4.6 ุนุฑุถ ุงูุฑุณุงุฆู ุงูุฃุฎูุฑุฉ (Recent Messages)

**Endpoint:** `GET /api/messages/recent`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุฃุญุฏุซ ุงูุฑุณุงุฆู

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 4.7 ุงุฎุชุจุงุฑ Socket.io ููุฑุณุงุฆู ุงูููุฑูุฉ

**Event:** `message_received`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ุนูุฏ ุฅุฑุณุงู ุฑุณุงูุฉุ ุงููุณุชูุจู ูุณุชูู ุฅุดุนุงุฑ ููุฑู ุนุจุฑ Socket.io

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

## ๐ ุงููุฑุญูุฉ 5: ุงุฎุชุจุงุฑ ุฏูุงู ุงูุฅุดุนุงุฑุงุช (Notifications)

### 5.1 ุนุฑุถ ุฌููุน ุงูุฅุดุนุงุฑุงุช (Get All Notifications)

**Endpoint:** `GET /api/notifications`

**ุงูุญุงูุฉ:** โณ ูุนูู

**Parameters:** `?page=1&limit=20`

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ูุงุฆูุฉ ุจุงูุฅุดุนุงุฑุงุช ูุน pagination

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 5.2 ุนุฑุถ ุงูุฅุดุนุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ (Get Unread)

**Endpoint:** `GET /api/notifications/unread`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุงูุฅุดุนุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ ููุท

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 5.3 ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ (Unread Count)

**Endpoint:** `GET /api/notifications/unread-count`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- { unreadCount: number }

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 5.4 ุฅุดุนุงุฑุงุช ุญุณุจ ุงูููุน (Get by Type)

**Endpoint:** `GET /api/notifications/type/booking_accepted`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุฅุดุนุงุฑุงุช ูู ุงูููุน ุงููุญุฏุฏ ููุท

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 5.5 ุชุญุฏูุฏ ุฅุดุนุงุฑ ูููุฑูุก (Mark as Read)

**Endpoint:** `PATCH /api/notifications/:id/read`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- is_read ูุตุจุญ true

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 5.6 ุชุญุฏูุฏ ุฌููุน ุงูุฅุดุนุงุฑุงุช ูููุฑูุกุฉ (Mark All Read)

**Endpoint:** `PATCH /api/notifications/mark-all-read`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุฌููุน ุงูุฅุดุนุงุฑุงุช is_read = true

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 5.7 ุญุฐู ุฅุดุนุงุฑ (Delete Notification)

**Endpoint:** `DELETE /api/notifications/:id`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุงูุฅุดุนุงุฑ ููุญุฐู

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 5.8 ุงุฎุชุจุงุฑ Socket.io ููุฅุดุนุงุฑุงุช ุงูููุฑูุฉ

**Event:** `new_notification`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ุนูุฏ ุญุฏูุซ ุญุฏุซ (ุญุฌุฒุ ูุจููุ ุฑูุถ)ุ ุงููุณุชุฎุฏู ูุณุชูู ุฅุดุนุงุฑ ููุฑู

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

## โญ ุงููุฑุญูุฉ 6: ุงุฎุชุจุงุฑ ุฏูุงู ุงูุชููููุงุช (Ratings)

### 6.1 ุฅูุดุงุก ุชูููู (Create Rating)

**Endpoint:** `POST /api/ratings`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ:**
```json
{
  "targetUserId": "[DRIVER_UUID]",
  "bookingId": "[COMPLETED_BOOKING_UUID]",
  "rating": 5,
  "comment": "ุณุงุฆู ููุชุงุฒุ ุฑุญูุฉ ูุฑูุญุฉ ูุขููุฉ"
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 201 Created
- ุงูุชูููู ูููุดุฃ ุจูุฌุงุญ
- ูุชูุณุท ุชูููู ุงูุณุงุฆู ูุชุญุฏุซ

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 6.2 ุนุฑุถ ุฌููุน ุงูุชููููุงุช (Get All Ratings)

**Endpoint:** `GET /api/ratings`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ูุงุฆูุฉ ุจุฌููุน ุงูุชููููุงุช

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 6.3 ุนุฑุถ ุชููููุงุช ูุณุชุฎุฏู (Get User Ratings)

**Endpoint:** `GET /api/ratings/user/:userId`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุฌููุน ุงูุชููููุงุช ูููุณุชุฎุฏู ุงููุญุฏุฏ

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 6.4 ูุชูุณุท ุชูููู ุงููุณุชุฎุฏู (Get Average Rating)

**Endpoint:** `GET /api/ratings/user/:userId/average`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- { userId, averageRating, totalRatings }

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 6.5 ุฃุนูู ุงููุณุชุฎุฏููู ุชููููุงู (Top Users)

**Endpoint:** `GET /api/ratings/top-users`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ูุงุฆูุฉ ุจุฃุนูู ุงููุณุชุฎุฏููู ุชููููุงู

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 6.6 ุชุนุฏูู ุชูููู (Update Rating)

**Endpoint:** `PUT /api/ratings/:id`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ:**
```json
{
  "rating": 4,
  "comment": "ุชุนุฏูู ุงูุชูููู"
}
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุงูุชูููู ูุชู ุชุญุฏูุซู

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 6.7 ุญุฐู ุชูููู (Delete Rating)

**Endpoint:** `DELETE /api/ratings/:id`

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 200 OK
- ุงูุชูููู ููุญุฐู
- ูุชูุณุท ุงูุชูููู ูุชุญุฏุซ

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 6.8 ูุญุงููุฉ ุชูููู ูุฒุฏูุฌ (Duplicate Rating)

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 400 Bad Request
- ุฑุณุงูุฉ ุฎุทุฃ: "ูุง ูููู ุชูููู ููุณ ุงูุญุฌุฒ ูุฑุชูู"

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

## ๐ก๏ธ ุงููุฑุญูุฉ 7: ุงุฎุชุจุงุฑ ุงูุฃูุงู ูุงูุตูุงุญูุงุช

### 7.1 ุงููุตูู ุจุฏูู Token

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงูุงุฎุชุจุงุฑ:** ูุญุงููุฉ ุงููุตูู ูุฃู endpoint ูุญูู ุจุฏูู Authorization header

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 401 Unauthorized

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 7.2 Token ุบูุฑ ุตุงูุญ

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงูุงุฎุชุจุงุฑ:** ุงุณุชุฎุฏุงู token ูุนุฏู ุฃู ููุชูู ุงูุตูุงุญูุฉ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 403 Forbidden

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 7.3 ูุญุงููุฉ ุชุนุฏูู ุจูุงูุงุช ูุณุชุฎุฏู ุขุฎุฑ

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงูุงุฎุชุจุงุฑ:** ูุญุงููุฉ ุชุนุฏูู ุฃู ุญุฐู demand/booking ููุณุชุฎุฏู ุขุฎุฑ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 403 Forbidden

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

### 7.4 Rate Limiting

**ุงูุญุงูุฉ:** โณ ูุนูู

**ุงูุงุฎุชุจุงุฑ:** ุฅุฑุณุงู ุฃูุซุฑ ูู 100 ุทูุจ ุฎูุงู 15 ุฏูููุฉ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- Status: 429 Too Many Requests

**ุงููุชูุฌุฉ ุงููุนููุฉ:**
```
[ุณูุชู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

## ๐ ููุฎุต ุงููุชุงุฆุฌ ุงูููุงุฆู

### ุฅุญุตุงุฆูุงุช ุนุงูุฉ

- **ุฅุฌูุงูู ุงูุงุฎุชุจุงุฑุงุช:** 53
- **ุงุฎุชุจุงุฑุงุช ูุงุฌุญุฉ:** 0
- **ุงุฎุชุจุงุฑุงุช ูุงุดูุฉ:** 0
- **ูุนุฏู ุงููุฌุงุญ:** 0%

### ุงููุดุงูู ุงูููุชุดูุฉ

```
[ุณูุชู ุชุญุฏูุซูุง ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

### ุงูุชูุตูุงุช

```
[ุณูุชู ุชุญุฏูุซูุง ุจุนุฏ ุงูุงุฎุชุจุงุฑ]
```

---

## ๐ ููููุฉ ุชูููุฐ ุงูุงุฎุชุจุงุฑ

### ุงูุฃุฏูุงุช ุงููุณุชุฎุฏูุฉ

1. **cURL** - ูุงุฎุชุจุงุฑ API endpoints ูู command line
2. **Postman** - ูุงุฎุชุจุงุฑ ุจุดูู ุชูุงุนูู (ุงุฎุชูุงุฑู)
3. **Node.js Script** - ุณูุฑูุจุช ุขูู ููุงุฎุชุจุงุฑ

### ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ุงููุทููุจุฉ

- ูุณุชุฎุฏู ุฑุงูุจ ุชุฌุฑูุจู
- ูุณุชุฎุฏู ุณุงุฆู ุชุฌุฑูุจู (ูุฅูุดุงุก ุนุฑูุถ)
- ุทูุจุงุช ูุนุฑูุถ ุชุฌุฑูุจูุฉ
- ุญุฌูุฒุงุช ุชุฌุฑูุจูุฉ

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 2025-11-18
**ุขุฎุฑ ุชุญุฏูุซ:** 2025-11-18
**ุงูุญุงูุฉ:** ุฌุงูุฒ ููุชูููุฐ โณ
