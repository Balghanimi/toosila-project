═══════════════════════════════════════════════════════════════
🚀 أوامر النشر السريع على Railway - مشروع توصيلة
═══════════════════════════════════════════════════════════════

✅ تم إصلاح جميع المشاكل:
   - client/package-lock.json موجود (TypeScript 4.9.5)
   - server/package-lock.json موجود
   - Dockerfile محدّث (ينسخ lockfiles صراحةً)
   - Express يخدم React مباشرة
   - لا يوجد start.sh (CMD مباشر)
   - railway.json معد بشكل صحيح

═══════════════════════════════════════════════════════════════
📋 انسخ والصق هذه الأوامر:
═══════════════════════════════════════════════════════════════

# 1️⃣ إضافة جميع الملفات المعدلة
git add Dockerfile
git add package.json
git add client/package-lock.json
git add server/package-lock.json
git add railway.json
git add server/app.js
git add server/server.js
git add -u

# 2️⃣ عمل Commit
git commit -m "fix: حل جميع مشاكل البناء على Railway

- توليد client/package-lock.json و server/package-lock.json
- تحديث Dockerfile لنسخ lockfiles صراحة
- استخدام npm ci في جميع المراحل
- Express يخدم React في الإنتاج
- CMD مباشر: node server/server.js
- إزالة workspaces لتبسيط البناء

يحل: npm ci لا يجد package-lock.json"

# 3️⃣ النشر على Railway
git push

═══════════════════════════════════════════════════════════════
🔍 بعد git push، راقب Railway Dashboard:
═══════════════════════════════════════════════════════════════

المتوقع:
✅ البناء ينجح (3-5 دقائق)
✅ التطبيق يبدأ: "Server running on port 3000"
✅ الرابط: https://your-app.railway.app

═══════════════════════════════════════════════════════════════
🧪 اختبر النشر:
═══════════════════════════════════════════════════════════════

# Health Check
curl https://your-app.railway.app/api/health

# الواجهة (في المتصفح)
https://your-app.railway.app

# التوجيه من جانب العميل
https://your-app.railway.app/profile
https://your-app.railway.app/offers

═══════════════════════════════════════════════════════════════
⚙️ متغيرات البيئة المطلوبة (في Railway Dashboard):
═══════════════════════════════════════════════════════════════

NODE_ENV=production
DATABASE_URL=postgresql://...
JWT_SECRET=your-secret-here
JWT_REFRESH_SECRET=your-refresh-secret
CORS_ORIGIN=https://your-app.railway.app
FRONTEND_URL=https://your-app.railway.app

═══════════════════════════════════════════════════════════════

✅ جاهز للنشر! راجع DEPLOY_GUIDE_AR.md للتفاصيل الكاملة

═══════════════════════════════════════════════════════════════
