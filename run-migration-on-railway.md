# ุชุดุบูู Migration 009 ุนูู Railway Production

## ุงูุฎุทูุงุช:

### ุงูุทุฑููุฉ 1: ุงุณุชุฎุฏุงู Railway Dashboard (ุงูุฃุณูู)

1. ุงูุชุญ [Railway Dashboard](https://railway.app/dashboard)
2. ุงุฎุชุฑ ูุดุฑูุน **toosila-project**
3. ุงุฎุชุฑ ุงูู **Backend Service**
4. ุงุถุบุท ุนูู **Shell** ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
5. ุงูุณุฎ ูุงูุตู ุงูุฃูุฑ ุงูุชุงูู ูู Shell:

```bash
npm run db:migrate:009
```

6. ุงุถุบุท Enter ูุงูุชุธุฑ ุญุชู ููุชูู ุงูุชูููุฐ

---

### ุงูุทุฑููุฉ 2: ุงุณุชุฎุฏุงู Railway CLI

ุฅุฐุง ูุงู ูุฏูู Railway CLI ูุซุจุช:

```bash
railway login
railway link
railway run npm run db:migrate:009
```

---

### ุงูุทุฑููุฉ 3: ุงูุงุชุตุงู ุงููุจุงุดุฑ ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

1. ูู Railway Dashboardุ ุงุฐูุจ ุฅูู **Database Service**
2. ุงูุณุฎ **DATABASE_URL** ูู Variables
3. ูู ุจุชุดุบูู ูุฐุง ุงูุฃูุฑ ูุญููุงู (ุงุณุชุจุฏู DATABASE_URL ุจุงููููุฉ ุงูููุณูุฎุฉ):

```bash
psql "YOUR_DATABASE_URL_HERE" -f "C:\Users\a2z\toosila-project\server\migrations\009_add_messages_read_status.sql"
```

---

## ูุงุฐุง ุณูุญุฏุซ ุนูุฏ ุชุดุบูู Migrationุ

โ ุณูุถูู 4 ุฃุนูุฏุฉ ุฌุฏูุฏุฉ ูุฌุฏูู messages:
- `is_read` - ูุชุชุจุน ุงูุฑุณุงุฆู ุงูููุฑูุกุฉ
- `read_at` - ููุช ุงููุฑุงุกุฉ
- `read_by` - ูู ูุฑุฃ ุงูุฑุณุงูุฉ
- `updated_at` - ุขุฎุฑ ุชุญุฏูุซ

โ ุณูุถูู 3 indexes ููุฃุฏุงุก

โ ุณูุถูู trigger ุชููุงุฆู ูุชุญุฏูุซ updated_at

โ ุณุชุฎุชูู ุฌููุน ุฃุฎุทุงุก "column m.is_read does not exist"

โ ุณุชุนูู ูุธููุฉ ุงูุญุฐู ุจุดูู ุตุญูุญ

---

## ุจุนุฏ ุชุดุบูู Migration:

1. ุญุฏูุซ ุตูุญุฉ ุงูุชุทุจูู ูู ุงููุชุตูุญ (F5)
2. ุฌุฑุจ ุญุฐู ุนุฑุถ - ูุฌุจ ุฃู ูุนูู ุจุฏูู ุฃุฎุทุงุก
3. ุชุฃูุฏ ูู ุงุฎุชูุงุก ุงูุฃุฎุทุงุก ูู Console

---

## ุฅุฐุง ูุงุฌูุช ูุดุงูู:

ุฃุฎุจุฑูู ูุณุฃุณุงุนุฏู! ๐
