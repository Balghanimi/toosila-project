════════════════════════════════════════════════════════════════
  🚨 URGENT: إصلاح مشكلة الحجوزات! 🚨
════════════════════════════════════════════════════════════════

المشكلة:
--------
1. ❌ "Duplicate entry" - لا يمكن الحجز مرة أخرى بعد الإلغاء
2. ❌ "Only 0 seat(s) available" - المقاعد المحجوزة لا تُحرّر بعد الإلغاء

السبب:
------
قيد UNIQUE(offer_id, passenger_id) في جدول bookings يمنع المستخدم من
الحجز على نفس العرض مرتين، حتى بعد إلغاء الحجز الأول!

الحل:
-----
نفذ Migration 012 على Railway لإصلاح القيد:

الخطوات:
--------

1. افتح: https://railway.app/dashboard
2. اختر مشروع: toosila-backend
3. اضغط على: Shell (من القائمة الجانبية)
4. انسخ والصق هذا الأمر:

   npm run db:migrate:012

5. اضغط Enter وانتظر 10 ثواني

════════════════════════════════════════════════════════════════

أو استخدم Railway CLI:

   railway login
   railway link
   railway run npm run db:migrate:012

════════════════════════════════════════════════════════════════

ما الذي سيتغير؟
----------------

قبل Migration 012:
❌ المستخدم يحجز العرض → يلغي الحجز → لا يمكنه الحجز مرة أخرى (Duplicate entry)

بعد Migration 012:
✅ المستخدم يحجز العرض → يلغي الحجز → يمكنه الحجز مرة أخرى!
✅ لا يزال يمنع وجود حجزين نشطين (pending/accepted) لنفس العرض
✅ المقاعد الملغاة تُحرّر تلقائياً

════════════════════════════════════════════════════════════════

بعد التنفيذ:
-------------
✅ حدّث صفحة المتصفح (F5)
✅ جرّب الحجز مرة أخرى
✅ يجب أن يعمل بدون أخطاء!

════════════════════════════════════════════════════════════════
